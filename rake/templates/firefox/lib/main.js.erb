var pageMod = require('page-mod');
var careplaneWorker = require('Worker');
var data = require("self").data;

pageMod.PageMod({
  include: [
    /.*hipmunk.com.*/,
    /.*kayak.com.*/,
    /.*orbitz.com.*/
  ],
  contentScriptWhen: 'ready',
  contentScriptFile: [<% CareplaneConfig.content_script_files('firefox').each do |js_file| %>
    data.url('<%= js_file.sub /^src\//,'' %>'),<% end %>
  ],
  onAttach: function(addon) {
    var worker = new careplaneWorker.firefox(addon);
    worker.init();
  }
});
